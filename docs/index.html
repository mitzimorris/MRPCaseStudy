<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Multilevel Regression and Poststratification Case Studies</title>
  <meta name="description" content="Introduction to Bayesian Multilevel Modeling and Poststratification using rstanarm, brms, and Stan" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Multilevel Regression and Poststratification Case Studies" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Introduction to Bayesian Multilevel Modeling and Poststratification using rstanarm, brms, and Stan" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Multilevel Regression and Poststratification Case Studies" />
  
  <meta name="twitter:description" content="Introduction to Bayesian Multilevel Modeling and Poststratification using rstanarm, brms, and Stan" />
  

<meta name="author" content="Juan Lopez-Martin, Justin H. Phillips, and Andrew Gelman" />


<meta name="date" content="2020-12-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  

<link rel="next" href="survey-and-population-datasets.html"/>
<script src="libs/header-attrs-2.5/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">MRP Case Studies</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a></li>
<li class="chapter" data-level="1" data-path="survey-and-population-datasets.html"><a href="survey-and-population-datasets.html"><i class="fa fa-check"></i><b>1</b> Survey and Population Datasets</a>
<ul>
<li class="chapter" data-level="1.1" data-path="survey-and-population-datasets.html"><a href="survey-and-population-datasets.html#survey-data"><i class="fa fa-check"></i><b>1.1</b> Survey Data</a></li>
<li class="chapter" data-level="1.2" data-path="survey-and-population-datasets.html"><a href="survey-and-population-datasets.html#pop-data"><i class="fa fa-check"></i><b>1.2</b> Population Data</a></li>
<li class="chapter" data-level="1.3" data-path="survey-and-population-datasets.html"><a href="survey-and-population-datasets.html#multilevel-model-group-level-predictors"><i class="fa fa-check"></i><b>1.3</b> Multilevel Model Group-level Predictors</a></li>
<li class="chapter" data-level="1.4" data-path="survey-and-population-datasets.html"><a href="survey-and-population-datasets.html#explore-data"><i class="fa fa-check"></i><b>1.4</b> Exploratory Data Analysis</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="mrp-intro.html"><a href="mrp-intro.html"><i class="fa fa-check"></i><b>2</b> Introduction to Multilevel Modeling and Poststratification (MRP)</a>
<ul>
<li class="chapter" data-level="2.1" data-path="mrp-intro.html"><a href="mrp-intro.html#first-stage-estimating-the-individual-response-model"><i class="fa fa-check"></i><b>2.1</b> First stage: Estimating the Individual-Response Model</a></li>
<li class="chapter" data-level="2.2" data-path="mrp-intro.html"><a href="mrp-intro.html#second-stage-poststratification"><i class="fa fa-check"></i><b>2.2</b> Second Stage: Poststratification</a></li>
<li class="chapter" data-level="2.3" data-path="mrp-intro.html"><a href="mrp-intro.html#postrat-state"><i class="fa fa-check"></i><b>2.3</b> MRP for Small Area Estimation</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="mrp-intro.html"><a href="mrp-intro.html#estimation-for-subgroups-within-sub-national-units"><i class="fa fa-check"></i><b>2.3.1</b> Estimation for subgroups within sub-national units</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="mrp-intro.html"><a href="mrp-intro.html#adjusting-for-nonrepresentative-surveys"><i class="fa fa-check"></i><b>2.4</b> Adjusting for Nonrepresentative Surveys</a></li>
<li class="chapter" data-level="2.5" data-path="mrp-intro.html"><a href="mrp-intro.html#practical-considerations"><i class="fa fa-check"></i><b>2.5</b> Practical Considerations</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="mrp-intro.html"><a href="mrp-intro.html#census-incompletness-and-uncertainty"><i class="fa fa-check"></i><b>2.5.1</b> Census incompletness and uncertainty</a></li>
<li class="chapter" data-level="2.5.2" data-path="mrp-intro.html"><a href="mrp-intro.html#nonreponse-and-missing-data"><i class="fa fa-check"></i><b>2.5.2</b> Nonreponse and missing data</a></li>
<li class="chapter" data-level="2.5.3" data-path="mrp-intro.html"><a href="mrp-intro.html#model-complexity"><i class="fa fa-check"></i><b>2.5.3</b> Model complexity</a></li>
<li class="chapter" data-level="2.5.4" data-path="mrp-intro.html"><a href="mrp-intro.html#empty-cells-in-the-poststratification-table"><i class="fa fa-check"></i><b>2.5.4</b> Empty cells in the poststratification table</a></li>
<li class="chapter" data-level="2.5.5" data-path="mrp-intro.html"><a href="mrp-intro.html#subnational-units-not-represented-in-the-survey"><i class="fa fa-check"></i><b>2.5.5</b> Subnational units not represented in the survey</a></li>
<li class="chapter" data-level="2.5.6" data-path="mrp-intro.html"><a href="mrp-intro.html#computational-issues"><i class="fa fa-check"></i><b>2.5.6</b> Computational issues</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Multilevel Regression and Poststratification Case Studies</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="header">
<h1 class="title">Multilevel Regression and Poststratification Case Studies</h1>
<p class="author"><em>Juan Lopez-Martin, Justin H. Phillips, and Andrew Gelman<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></em></p>
<p class="date"><em>2020-12-11</em></p>
</div>
<div id="overview" class="section level1 unnumbered">
<h1>Overview</h1>
<p>Multilevel Modeling and Poststratification (MRP) is used in two closely related applications:</p>
<ol style="list-style-type: decimal">
<li><p>Small-area estimation: Sub-national surveys are not always available, and even then finding comparable surveys across sub-national units is rare. However, public views at the sub-national level are often central, as many policies are decided by local goverments or sub-national area representatives at national assemblies. MRP allows us to use national surveys to generate reliable estimates of sub-national opinion (<span class="citation">Park, Gelman, and Bafumi (<a href="#ref-park2004bayesian" role="doc-biblioref">2004</a>)</span>, <span class="citation">Lax and Phillips (<a href="#ref-lax2009gay" role="doc-biblioref">2009</a><a href="#ref-lax2009gay" role="doc-biblioref">a</a>)</span>, <span class="citation">Lax and Phillips (<a href="#ref-lax2009states" role="doc-biblioref">2009</a><a href="#ref-lax2009states" role="doc-biblioref">b</a>)</span>, <span class="citation">Kiewiet de Jonge, Langer, and Sinozich (<a href="#ref-kiewiet2018predicting" role="doc-biblioref">2018</a>)</span>).</p></li>
<li><p>Using nonrepresentative surveys: Many surveys face serious difficulties in recruiting representative samples of participants (e.g. because of non-response bias). However, with proper statistical adjustment, nonrepresentative surveys can be used to generate accurate opinion estimates (<span class="citation">Wang et al. (<a href="#ref-wang2015xbox" role="doc-biblioref">2015</a>)</span>, <span class="citation">Downes et al. (<a href="#ref-downes2018multilevel" role="doc-biblioref">2018</a>)</span>).</p></li>
</ol>
<p>In this case study, we will show how to use MRP to estimate public opinion.
We start with an overview of the survey and population data
and walk through the processing necessary to align the two.
Next, we describe the two essential stages of MRP: building an
individual-response model and using poststratification.
The individual-response model takes all the responses in the national survey
and uses multilevel modeling in order to predict opinion estimates based on
demographic-geographic subgroups (e.g. the subgroup consisting of
white women between ages 50-59 with postgraduate education residing in California).
The poststratification process takes these these opinion estimates by subgroups
and weights them by the subgroup frequency at the (national or subnational) unit of interest.
Then we show how MRP can be used to obtain accurate national estimates from a biased sample.
Lastly, we introduce some practical considerations.</p>
<p>All the code is also available in the <a href="https://github.com/JuanLopezMartin/MRPCaseStudy">Rmarkdown file on GitHub</a></p>
<p><em>These case studies are still under development. Please send comments, questions, and suggestions to <a href="jl5522@columbia.edu">jl5522@columbia.edu</a>.</em></p>

</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-downes2018multilevel">
<p>Downes, Marnie, Lyle C Gurrin, Dallas R English, Jane Pirkis, Dianne Currier, Matthew J Spittal, and John B Carlin. 2018. “Multilevel Regression and Poststratification: A Modeling Approach to Estimating Population Quantities from Highly Selected Survey Samples.” <em>American Journal of Epidemiology</em> 187 (8): 1780–90.</p>
</div>
<div id="ref-kiewiet2018predicting">
<p>Kiewiet de Jonge, Chad P, Gary Langer, and Sofi Sinozich. 2018. “Predicting State Presidential Election Results Using National Tracking Polls and Multilevel Regression with Poststratification (Mrp).” <em>Public Opinion Quarterly</em> 82 (3): 419–46.</p>
</div>
<div id="ref-lax2009gay">
<p>Lax, Jeffrey R, and Justin H Phillips. 2009a. “Gay Rights in the States: Public Opinion and Policy Responsiveness.” <em>American Political Science Review</em> 103 (3): 367–86.</p>
</div>
<div id="ref-lax2009states">
<p>Lax, Jeffrey R, and Justin H Phillips. 2009b. “How Should We Estimate Public Opinion in the States?” <em>American Journal of Political Science</em> 53 (1): 107–21.</p>
</div>
<div id="ref-park2004bayesian">
<p>Park, David K, Andrew Gelman, and Joseph Bafumi. 2004. “Bayesian Multilevel Estimation with Poststratification: State-Level Estimates from National Polls.” <em>Political Analysis</em> 12 (4): 375–85.</p>
</div>
<div id="ref-wang2015xbox">
<p>Wang, Wei, David Rothschild, Sharad Goel, and Andrew Gelman. 2015. “Forecasting Elections with Non-Representative Polls.” <em>International Journal of Forecasting</em> 31 (3): 980–91.</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>The authors would like to thank Lauren Kennedy and Jonah Gabry, who developed an initial version the MRP introduction.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>

<a href="survey-and-population-datasets.html" class="navigation navigation-next navigation-unique" aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "serif",
"size": 1
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
